{"ast":null,"code":"import _classCallCheck from\"/home/batteryfree/111/frontend-course-2019/homeworks/roman.vlasov_batteryfree/homework_5/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/batteryfree/111/frontend-course-2019/homeworks/roman.vlasov_batteryfree/homework_5/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/batteryfree/111/frontend-course-2019/homeworks/roman.vlasov_batteryfree/homework_5/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/batteryfree/111/frontend-course-2019/homeworks/roman.vlasov_batteryfree/homework_5/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/batteryfree/111/frontend-course-2019/homeworks/roman.vlasov_batteryfree/homework_5/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Button from'./Button';import generatorField from'./generator-field-min';import emptyCell from'./empty-cell';import Setings from'./Setings';var MineField=/*#__PURE__*/function(_React$Component){_inherits(MineField,_React$Component);function MineField(props){var _this;_classCallCheck(this,MineField);_this=_possibleConstructorReturn(this,_getPrototypeOf(MineField).call(this,props));_this.handleClick=function(row,col){if(_this.mineFieldArr[row][col].lock)return;emptyCell(_this.mineFieldArr,row,col,_this.row,_this.col);var openCell=0;_this.mineFieldArr.forEach(function(element){element.forEach(function(cell){if(cell.disabled)openCell++;});});if(_this.mineFieldArr[row][col].cap==='*'){openCell=0;_this.mineFieldArr.forEach(function(element){element.forEach(function(cell){cell.disabled=true;cell.children=cell.cap;});});alert('YOU LOSE!!!');}if(openCell===_this.row*_this.col-_this.mines){_this.mineFieldArr.forEach(function(element){element.forEach(function(cell){return cell.disabled=true;});});alert('YOUR WON!!!');}_this.setState({mineField:_this.mineFieldArr});};_this.handleClickR=function(row,col){if(_this.mineFieldArr[row][col].lock){_this.mineFieldArr[row][col].lock=false;_this.mineFieldArr[row][col].children=\"\\xA0\";}else{_this.mineFieldArr[row][col].lock=true;_this.mineFieldArr[row][col].children='M';}_this.setState({mineField:_this.mineFieldArr});};_this.reStart=function(){if(_this.mines>_this.row*_this.col)_this.mines=_this.row*_this.col;_this.mineFieldArr=generatorField(_this.col,_this.row,_this.mines);_this.setState({maxMine:_this.row*_this.col,mineField:_this.mineFieldArr});};_this.handleChangeRow=function(value){_this.row=parseInt(value,10);_this.reStart();};_this.handleChangeCol=function(value){_this.col=parseInt(value,10);_this.reStart();};_this.handleChangeMine=function(value){_this.mines=parseInt(value,10);_this.reStart();};_this.row=6;_this.col=6;_this.mines=5;_this.mineFieldArr=generatorField(_this.col,_this.row,_this.mines);_this.state={mineField:_this.mineFieldArr,maxMine:36};return _this;}_createClass(MineField,[{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(Setings,{handleChangeRow:this.handleChangeRow,handleChangeMine:this.handleChangeMine,handleChangeCol:this.handleChangeCol,min:6,max:16,maxMine:this.state.maxMine,handleClick:this.reStart}),this.mineFieldArr.map(function(row,indexY){return React.createElement(\"div\",{key:indexY},row.map(function(cell,indexX){return React.createElement(Button,{key:indexX,row:indexY,col:indexX,colorText:_this2.state.mineField[indexY][indexX].children,children:_this2.state.mineField[indexY][indexX].children,disabled:_this2.state.mineField[indexY][indexX].disabled,onClick:_this2.handleClick,handleClickR:_this2.handleClickR});}));}));}}]);return MineField;}(React.Component);export{MineField as default};","map":{"version":3,"sources":["/home/batteryfree/111/frontend-course-2019/homeworks/roman.vlasov_batteryfree/homework_5/src/MineField.js"],"names":["React","Button","generatorField","emptyCell","Setings","MineField","props","handleClick","row","col","mineFieldArr","lock","openCell","forEach","element","cell","disabled","cap","children","alert","mines","setState","mineField","handleClickR","reStart","maxMine","handleChangeRow","value","parseInt","handleChangeCol","handleChangeMine","state","map","indexY","indexX","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Button from './Button';\nimport generatorField from './generator-field-min';\nimport emptyCell from './empty-cell';\nimport Setings from './Setings';\n\nexport default class MineField extends React.Component{\n    constructor(props) {\n        super(props);\n        this.row = 6;\n        this.col = 6;\n        this.mines = 5;\n        this.mineFieldArr = generatorField(this.col, this.row, this.mines);\n        this.state = ({\n            mineField: this.mineFieldArr,\n            maxMine: 36,\n        });\n    }\n\n    handleClick = (row, col) => {\n\n        if (this.mineFieldArr[row][col].lock) return;\n\n        emptyCell(this.mineFieldArr, row, col, this.row, this.col);\n\n        let openCell = 0;\n\n        this.mineFieldArr.forEach(element => {\n            element.forEach((cell) => {\n                if (cell.disabled) openCell++\n            })\n        });\n\n        if(this.mineFieldArr[row][col].cap === '*') {\n            openCell = 0;\n            this.mineFieldArr.forEach(element => {\n                element.forEach(cell => {\n                    cell.disabled = true\n                    cell.children = cell.cap\n                })\n            });\n            alert('YOU LOSE!!!');\n        }\n\n\n        if (openCell === (this.row * this.col - this.mines)) {\n            this.mineFieldArr.forEach(element => {\n                element.forEach(cell => cell.disabled = true)\n            })\n            alert('YOUR WON!!!');\n        }\n\n        this.setState({\n            mineField: this.mineFieldArr\n        })\n    }\n\n    handleClickR = (row, col) => {\n        if (this.mineFieldArr[row][col].lock) {\n            this.mineFieldArr[row][col].lock = false;\n            this.mineFieldArr[row][col].children = '\\u00A0';\n        } else {\n            this.mineFieldArr[row][col].lock = true;\n            this.mineFieldArr[row][col].children = 'M';\n        }\n\n        this.setState({\n            mineField: this.mineFieldArr\n        });\n    }\n\n\n    reStart = () => {\n        if (this.mines > this.row * this.col) this.mines = this.row * this.col\n        this.mineFieldArr = generatorField(this.col, this.row, this.mines);\n        this.setState({\n            maxMine: this.row * this.col,\n            mineField: this.mineFieldArr,\n        })\n    }\n\n    handleChangeRow = (value) => {\n        this.row = parseInt(value, 10);\n        this.reStart();\n    }\n\n    handleChangeCol = (value) => {\n        this.col = parseInt(value, 10); \n        this.reStart();\n    }\n\n    handleChangeMine = (value) => {\n        this.mines = parseInt(value, 10);\n        this.reStart();\n    }\n\n    render() {\n        return( \n            <div>\n                <Setings\n                    handleChangeRow={this.handleChangeRow}\n                    handleChangeMine = {this.handleChangeMine}\n                    handleChangeCol = {this.handleChangeCol}\n                    min={6}\n                    max={16}\n                    maxMine={this.state.maxMine}\n                    handleClick = {this.reStart}\n                ></Setings>\n                {\n                this.mineFieldArr.map((row, indexY) => {\n                    return (\n                        <div key={indexY}>{\n                            row.map((cell, indexX) => {\n                                return(\n                                    <Button\n                                        key={indexX}\n                                        row={indexY}\n                                        col={indexX}\n                                        colorText={this.state.mineField[indexY][indexX].children}\n                                        children={this.state.mineField[indexY][indexX].children}\n                                        disabled={this.state.mineField[indexY][indexX].disabled}\n                                        onClick={this.handleClick}\n                                        handleClickR={this.handleClickR}\n                                    ></Button>\n                                );\n                            })\n                        }</div>\n                    );\n                })\n            }</div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}